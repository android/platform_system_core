{
  "comments": [
    {
      "key": {
        "uuid": "01fb0596_070733bd",
        "filename": "fs_mgr/tests/fs_mgr_test.cpp",
        "patchSetId": 1
      },
      "lineNbr": 902,
      "author": {
        "id": 1137063
      },
      "writtenOn": "2020-01-30T03:21:37Z",
      "side": 1,
      "message": "I don\u0027t think it\u0027s a good idea to directly expose the dm-default-key cipher string in the fstab.  Android already has a convention for specifying disk encryption algorithms in fstab (fileencryption\u003d) and system properties (ro.crypto.*): \"aes-256-xts\" and \"adiantum\".  I think adding a second convention would confuse people.\n\nIt\u0027s true that the raw string makes the IV generator clear.  But that\u0027s more important from a kernel API perspective and to be compatible with dm-crypt for ease of testing.  For Android userspace, for now we can just hard-code plain64, similar to how sector_size:4096 will be hardcoded.\n\nNote that specifying just the raw dm-crypt cipher string also makes it ambiguous whether AES-128 or AES-256 is meant, since in the dm-crypt syntax, this is determined not from the cipher string but rather from the length of the key.\n\nSo I suggest just allowing \"aes-256-xts\" and \"adiantum\", and mapping those to the appropriate cipher strings and key lengths for the kernel -- similar to how FDE worked (https://android.googlesource.com/platform/system/vold/+/master/cryptfs.cpp#301).",
      "range": {
        "startLine": 902,
        "startChar": 62,
        "endLine": 902,
        "endChar": 93
      },
      "revId": "4f801aedeeb6c2088c1c945efba03f00c627fb60",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "380744df_270bcb85",
        "filename": "fs_mgr/tests/fs_mgr_test.cpp",
        "patchSetId": 1
      },
      "lineNbr": 902,
      "author": {
        "id": 1137063
      },
      "writtenOn": "2020-01-30T03:24:05Z",
      "side": 1,
      "message": "Another issue is that \"xchacha12,aes-adiantum-plain64\" would not actually be compatible with the fstab syntax, as it contains a comma.  Making it just \"adiantum\", like the fileencryption option and ro.crypto properties, would avoid that.",
      "parentUuid": "01fb0596_070733bd",
      "range": {
        "startLine": 902,
        "startChar": 62,
        "endLine": 902,
        "endChar": 93
      },
      "revId": "4f801aedeeb6c2088c1c945efba03f00c627fb60",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}