{
  "comments": [
    {
      "key": {
        "uuid": "aa3e53d7_1c2640f2",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 422,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-03-15T21:33:17Z",
      "side": 1,
      "message": "Does this work on Pixel 3 where ro.apex.updatable is set to true (which will be the norm)?\n\nI think 424-429 should be moved to before executing enter_default_mount_ns. Otherwise, mini-keyctl will be executed in a default namespace where  no APEX is mounted.",
      "revId": "e6786fff8697b3fc56f6bfc3faa20e13b7f3c713",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4322ffbc_c5f25139",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 422,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2019-03-15T21:38:45Z",
      "side": 1,
      "message": "03-15 21:05:47.172   829   829 I /system/bin/mini-keyctl: search /proc/keys for keyring id\n03-15 21:05:47.174   829   829 I /system/bin/mini-keyctl: Key [...] added to .fs-verity with key id 0x26df8c4c\n\nThat part seems to work, it\u0027s only explicitly depending on libcrypto (and that should probably be compiled in statically), I\u0027d guess bootstrap libc is fine. However, for some reason it doesn\u0027t find the key later in my preinstall. Hm.",
      "parentUuid": "aa3e53d7_1c2640f2",
      "revId": "e6786fff8697b3fc56f6bfc3faa20e13b7f3c713",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18a342eb_61bd0441",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 422,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2019-03-15T21:39:44Z",
      "side": 1,
      "message": "(But I\u0027ll double check and rebuild, just to ensure I have your most recent changes)",
      "parentUuid": "4322ffbc_c5f25139",
      "revId": "e6786fff8697b3fc56f6bfc3faa20e13b7f3c713",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dca99167_38153e42",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 422,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-03-15T21:43:20Z",
      "side": 1,
      "message": "In Pixel 3? Then that success is hard to explain, and I have to investigate what went wrong (or right in this case).\n \nAndroid.bp for minikeyctl says it\u0027s depending on libbase, libkeyutils, liblog, which internally depend on libc, etc. They can\u0027t use the bootstrap libc because the bootstrap libc is only for init and apexd.",
      "parentUuid": "4322ffbc_c5f25139",
      "revId": "e6786fff8697b3fc56f6bfc3faa20e13b7f3c713",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a970a8d_d0da4851",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 422,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2019-03-15T22:22:19Z",
      "side": 1,
      "message": "Seems to have been something stale. Changed order, works on Pixel 3.",
      "parentUuid": "dca99167_38153e42",
      "revId": "e6786fff8697b3fc56f6bfc3faa20e13b7f3c713",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9f4fc9c4_f7873334",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 427,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2019-03-15T21:40:51Z",
      "side": 1,
      "message": "(Unrelated to this change but I was about to ask :) To support update from Play, we put the key in /product.  But for OEM without Play, should the key be in /system?  It\u0027s probably not vendor?  Jiyong, is it correct?",
      "range": {
        "startLine": 427,
        "startChar": 65,
        "endLine": 427,
        "endChar": 71
      },
      "revId": "e6786fff8697b3fc56f6bfc3faa20e13b7f3c713",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "27294ee4_c8366cd6",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 427,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-03-15T21:47:48Z",
      "side": 1,
      "message": "I think, ideally, we need to have public keys in all partitions (system, product, vendor, and odm) each of which might be owned by a distinct entity.",
      "parentUuid": "9f4fc9c4_f7873334",
      "range": {
        "startLine": 427,
        "startChar": 65,
        "endLine": 427,
        "endChar": 71
      },
      "revId": "e6786fff8697b3fc56f6bfc3faa20e13b7f3c713",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f796f24b_4fe8ffdb",
        "filename": "rootdir/init.rc",
        "patchSetId": 1
      },
      "lineNbr": 427,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2019-03-15T23:03:29Z",
      "side": 1,
      "message": "OK, I\u0027ll ask you offline.",
      "parentUuid": "27294ee4_c8366cd6",
      "range": {
        "startLine": 427,
        "startChar": 65,
        "endLine": 427,
        "endChar": 71
      },
      "revId": "e6786fff8697b3fc56f6bfc3faa20e13b7f3c713",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}