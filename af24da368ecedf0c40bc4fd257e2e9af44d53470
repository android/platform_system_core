{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6f13499e_e4d08ec8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2020-10-26T12:07:56Z",
      "side": 1,
      "message": "We like to see some body to the commit message. For instance, I have no idea why checking base devt has been changed from error to warning. What values did you see for the devt, and maybe an explanation why.\n\nIt is OK to mute flakey tests IMHO.\n\nAFAIR the test was added because we had a bug in the overlayfs driver that messed up the xattr and devt etc in their cache layers. This was checking the kernel driver in partners hands was appropriately patched. We may no longer need these tests given that older kernels are no longer in our support grid, but bugs can return ... Not sure if we can abandon these tests yet. Do we have another bug in the overlayfs driver to worry about, which kernel(s) are you testing this on?\n\nAFAIK these devt\u0027s changed b/c the original assumption was that the data was sourced by a scratch partition made in the dynamic partition pool, so modified or not they had a similar source. Now that they are sourced on userdata, the assumption is now a bit more slippery? So at this juncture I am asking what aspects of the devt are the same (ie devt minor changes to denote a different partition for the underlying data)?\n\nThe test uses /system/bin/stat as the file being examined because it is also assumed not to be overridden (b/c if it is, the test assumptions that stat _works_ could be false), so logically it should have the same devt as reported by the overlayfs driver.",
      "range": {
        "startLine": 7,
        "startChar": 31,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "af24da368ecedf0c40bc4fd257e2e9af44d53470",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44201ef2_283d48d2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-10-26T12:19:07Z",
      "side": 1,
      "message": "okay I\u0027ll update description in next revision, I\u0027d like to discuss first so that\u0027s why I omit the message, as the details youre asking is in the bug, and I don\u0027t want to duplicate the details when I\u0027m not even sure if this is the right path.\n\nwhat I\u0027m seeing is the device id flaking between 16 and 17, so I suspect it\u0027s something to do with dm init order. however the dm number of the system partition is always dm-7 as far as I can tell.\n\nI\u0027m not sure about the kernel version tho, would need to check tomorrow.",
      "parentUuid": "6f13499e_e4d08ec8",
      "range": {
        "startLine": 7,
        "startChar": 31,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "af24da368ecedf0c40bc4fd257e2e9af44d53470",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fbdbda4_8f5c5a8d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-10-26T16:09:53Z",
      "side": 1,
      "message": "Thanks for the comments, I\u0027ve updated the bug with newer findings. Seems like the overlayfs driver is indeed returning some strange values, and this \"flaky device id\" problem doesn\u0027t seem to be caused by DSU, as I can observe the same behaviors on a regular device image. Could you take a look to see if there is any existing bug for this? Else we may fork a new bug for this.",
      "parentUuid": "44201ef2_283d48d2",
      "range": {
        "startLine": 7,
        "startChar": 31,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "af24da368ecedf0c40bc4fd257e2e9af44d53470",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a3f686f3_2fb006c7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2020-10-26T17:23:58Z",
      "side": 1,
      "message": "No bugs AFAICS. This test does not get a lot of \u0027press\u0027 and thus not many use it except those developing around adb remount. I can live with this CL reporting the test is flakey because of transition to using a variety of dm\u0027s, and that the devt can no longer be assumed to be stable through a reboot and leave it at that.",
      "parentUuid": "2fbdbda4_8f5c5a8d",
      "range": {
        "startLine": 7,
        "startChar": 31,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "af24da368ecedf0c40bc4fd257e2e9af44d53470",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aaa545bb_e7e5407a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-10-26T11:42:21Z",
      "side": 1,
      "message": "It seems the device id changes across reboots. Maybe it\u0027s because `stat` command doesn\u0027t produce correct output for dm-linear devices?\n\nI feel like ignoring the device id error might not be the best fix.. What\u0027s your opinion Mark. Is it reasonable to require the device id to not change across reboots? Or is it fine that we make this non fatal?",
      "revId": "af24da368ecedf0c40bc4fd257e2e9af44d53470",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}